(this["webpackJsonpexpense-tracker"]=this["webpackJsonpexpense-tracker"]||[]).push([[0],{129:function(e,t,s){},130:function(e,t,s){},134:function(e,t,s){},144:function(e,t){},146:function(e,t){},176:function(e,t){},178:function(e,t){},179:function(e,t){},185:function(e,t){},187:function(e,t){},190:function(e,t){},192:function(e,t){},212:function(e,t){},228:function(e,t){},231:function(e,t){},264:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s(28);const n=Object(c.b)({name:"auth",initialState:{username:"",email:"",password:"",isLogin:!1,token:null,isPremium:!1},reducers:{signup(e,t){console.log(t),e.username=t.payload.username,e.email=t.payload.email,e.password=t.payload.password},login(e,t){localStorage.setItem("email",t.payload.email),localStorage.setItem("username",t.payload.username),localStorage.setItem("postperscreen",5),console.log(t.payload.token),localStorage.setItem("token",t.payload.token),console.log(t.payload.token),e.isLogin=!0,e.email=t.payload.email,e.password=t.payload.password,e.token=t.payload.token},stayLogin(e){e.isLogin=!0},logout(e){localStorage.removeItem("email"),localStorage.removeItem("username"),localStorage.removeItem("postperscreen"),localStorage.removeItem("token"),e.isLogin=!1},setPremium(e,t){localStorage.setItem("premium",!0),e.isPremium=!0,console.log(t.payload.token),localStorage.setItem("token",t.payload.token),e.token=t.payload.token}}}),o=n.actions;var r=n.reducer;const l=Object(c.b)({name:"expense",initialState:{expenses:[],totalPages:1},reducers:{addExpenses(e,t){e.expenses=e.expenses.concat(t.payload.expenses),e.totalPages=t.payload.totalPages,console.log(e.totalPages)},addExpense(e,t){e.expenses=e.expenses.concat(t.payload.expenses)},deleteExpense(e,t){console.log(t.payload),e.expenses=e.expenses.filter((e=>e.id!=t.payload))}}}),i=l.actions;var d=l.reducer;const j=Object(c.b)({name:"leaderboard",initialState:{expenses:[]},reducers:{addExpense(e,t){e.expenses=[],e.expenses=e.expenses.concat(t.payload)}}}),b=j.actions;var m=j.reducer;var p=Object(c.a)({reducer:{auth:r,expense:d,leaderboard:m}}),x=s(119),u=s.n(x),h=(s(129),s(130),s(4)),O=s(266),g=s(270),f=s(267),y=s(12),w=s(1);var N=e=>{const t=Object(a.useRef)();return Object(w.jsx)(a.Fragment,{children:Object(w.jsx)(O.a,{className:"d-flex justify-content-center ",children:Object(w.jsxs)(g.a,{onSubmit:async e=>{e.preventDefault();const s=await fetch("http://51.20.129.197:3000/password/forgotpassword",{method:"POST",body:JSON.stringify({email:t.current.value}),headers:{"Content-Type":"application/json"}}),a=await s.json();console.log(a),a.message?alert(a.message):a.error&&alert(a.error)},children:[Object(w.jsxs)(g.a.Group,{className:"mb-3 ",children:[Object(w.jsx)(g.a.Label,{children:"Enter Your Email"}),Object(w.jsx)(g.a.Control,{type:"email",placeholder:"Enter Email",ref:t,required:!0})]}),Object(w.jsx)(f.a,{type:"submit",className:"btn-success m-2",children:"Submit"}),Object(w.jsx)(f.a,{className:"btn-danger",onClick:e.cancel,children:"Cancel"})]})})})};s(134);var v=()=>{const e=Object(a.useRef)(),t=Object(a.useRef)(),s=Object(a.useRef)(),c=Object(a.useRef)(),[n,r]=Object(a.useState)(null),[l,i]=Object(a.useState)(null),[d,j]=Object(a.useState)(!1),[b,m]=Object(a.useState)(!1),p=Object(y.b)();Object(h.p)();return console.log(d),Object(w.jsxs)(a.Fragment,{children:[!b&&Object(w.jsx)(O.a,{className:"d-flex justify-content-center ",children:Object(w.jsxs)(g.a,{className:"w-50 border border-success  rounded form",onSubmit:async s=>{let a,n;s.preventDefault(),d?(n={email:c.current.value,password:t.current.value},a=await fetch("http://51.20.129.197:3000/user/auth-login",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})):(n={username:e.current.value,email:c.current.value,password:t.current.value},console.log(n),a=await fetch("http://51.20.129.197:3000/user/auth-signup",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}));const l=await a.json();if(console.log(l),l.error)if(d)i(l.error);else{const e=l.error;i(e)}else d?(console.log(l.token),r(l.message),p(o.login({...n,token:l.token})),window.location.reload()):(r("User Created Successfully"),p(o.signup(n)))},children:[Object(w.jsx)(g.a.Text,{className:"fs-1 text-success fw-bold",children:d?"Login":"Sign Up"}),n&&Object(w.jsx)("h5",{className:"text-success",children:n}),l&&Object(w.jsx)("h5",{className:"text-danger",children:l}),!d&&Object(w.jsxs)(g.a.Group,{className:"mb-3 mx-2",controlId:"formBasicPassword",children:[Object(w.jsx)(g.a.Label,{className:"fw-bold",children:"Name"}),Object(w.jsx)(g.a.Control,{type:"text",placeholder:"Name",className:"border border-success",ref:e,required:!0})]}),Object(w.jsxs)(g.a.Group,{className:"mb-3  mx-2",controlId:"formBasicEmail",children:[Object(w.jsx)(g.a.Label,{className:"fw-bold",children:"Email address"}),Object(w.jsx)(g.a.Control,{type:"email",placeholder:"Enter email",className:"border border-success",ref:c,required:!0}),Object(w.jsx)(g.a.Text,{className:"text-muted text-success",children:"We'll never share your email with anyone else."})]}),Object(w.jsxs)(g.a.Group,{className:"mb-3  mx-2",controlId:"formBasicPassword",children:[Object(w.jsx)(g.a.Label,{className:"fw-bold",children:"Password"}),Object(w.jsx)(g.a.Control,{type:"password",placeholder:"Password",className:"border border-success",ref:t,required:!0})]}),!d&&Object(w.jsxs)(g.a.Group,{className:"mb-3  mx-2",controlId:"formBasicPassword",children:[Object(w.jsx)(g.a.Label,{className:"fw-bold",children:"Confirm Password"}),Object(w.jsx)(g.a.Control,{type:"password",placeholder:"Confirm Password",className:"border border-success",ref:s,required:!0})]}),Object(w.jsx)(f.a,{variant:"success",type:"submit",className:"fw-bold",children:d?"Login":"SignUp"}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{type:"button",onClick:()=>{j((e=>!e))},className:"m-2 border border-none bg-none text-success fw-bold",children:d?"Don`t Have An Account":"Have An Account?"}),d&&Object(w.jsx)("button",{type:"button",onClick:()=>{m(!0)},className:"m-2 border border-none bg-none text-success fw-bold",children:"Forgot Password?"})]})}),b&&Object(w.jsx)(N,{cancel:()=>{m(!1)}})]})},S=s(269),k=s(120),A=s(268),E=s(271);var C=e=>{let{total:t,current:s,onChangePage:a}=e;console.log(t+" "+s+" ");let c=[];s>1&&c.push(Object(w.jsx)(E.a.Prev,{onClick:()=>{a(s-1)}},"prev"));for(let n=1;n<=t;n++)c.push(Object(w.jsx)(E.a.Item,{"data-page":n,active:n===s,onClick:()=>{a(n)},children:n},n));return s<t&&c.push(Object(w.jsx)(E.a.Next,{onClick:()=>{a(s+1)}},"next")),Object(w.jsx)(E.a,{children:c})};var P=()=>{const[e,t]=Object(a.useState)(1),[s,c]=Object(a.useState)(localStorage.getItem("postperscreen")),n=Object(y.c)((e=>e.expense.expenses)),o=Object(y.c)((e=>e.expense.totalPages)),r=Object(y.b)(),l=async e=>{const t=await fetch("http://51.20.129.197:3000/expense/delete-expense/".concat(e),{method:"DELETE",headers:{Authorization:localStorage.getItem("token")}});await t.json();r(i.deleteExpense(e))};console.log(o);const d=Object(a.useCallback)((e=>{console.log("hi"),t(e)}),[]);console.log(e);return Object(w.jsx)(a.Fragment,{children:Object(w.jsxs)(O.a,{children:[Object(w.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,variant:"",className:"",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{className:"bg-info ",children:"#"}),Object(w.jsx)("th",{className:"bg-info ",children:"Expense Amount"}),Object(w.jsx)("th",{className:"bg-info",children:"Description"}),Object(w.jsx)("th",{className:"bg-info",children:"Category  "}),Object(w.jsx)("th",{className:"bg-info",children:"Action  "})]})}),Object(w.jsx)("tbody",{children:n.slice((e-1)*s,e*s).map(((t,a)=>Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:(e-1)*s+a+1}),Object(w.jsx)("td",{children:t.expenseAmount}),Object(w.jsx)("td",{children:t.description}),Object(w.jsx)("td",{children:t.category}),Object(w.jsx)("td",{children:Object(w.jsx)(f.a,{className:"btn-danger",onClick:l.bind(null,t.id),children:"Delete"})})]},t.id)))})]}),Object(w.jsxs)(S.a,{className:"",children:[Object(w.jsx)(k.a,{className:"",children:Object(w.jsx)(C,{total:o,current:e,onChangePage:d})}),Object(w.jsx)(k.a,{className:"col-2",children:Object(w.jsxs)("select",{onChange:e=>{console.log(e.target.value),localStorage.setItem("postperscreen",e.target.value),c(e.target.value)},children:[Object(w.jsx)("option",{value:"5",children:"5"}),Object(w.jsx)("option",{value:"10",children:"10"}),Object(w.jsx)("option",{value:"20",children:"20"}),Object(w.jsx)("option",{value:"50",children:"50"})]})})]})]})})};var I=()=>{const e=Object(y.c)((e=>e.leaderboard.expenses));return Object(w.jsx)(a.Fragment,{children:Object(w.jsxs)(O.a,{children:[Object(w.jsx)("h2",{children:"LeaderBoard"}),e.map((e=>Object(w.jsx)(S.a,{children:Object(w.jsxs)("p",{children:[e.username," Total Expenses:- ",e.totalExpenses]})})))]})})};s(136);var D=()=>{const[e,t]=Object(a.useState)(!1),[s,c]=Object(a.useState)(!1),n=Object(y.c)((e=>e.auth.isPremium)),r=Object(a.useRef)(),l=Object(a.useRef)(),d=Object(a.useRef)(),j=Object(y.b)();return Object(w.jsxs)(a.Fragment,{children:[Object(w.jsxs)(S.a,{children:[Object(w.jsx)(k.a,{className:"col-8",children:Object(w.jsx)(O.a,{className:"d-flex justify-content-center mb-3",children:Object(w.jsxs)(g.a,{onSubmit:async e=>{e.preventDefault();const s={expenseAmount:r.current.value,description:l.current.value,category:d.current.value,token:localStorage.getItem("token")};console.log(s);const a=await fetch("http://51.20.129.197:3000/expense/add-expense",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}),c=await a.json();console.log(c),j(i.addExpense({expenses:c.expenseData})),t(!1)},children:[Object(w.jsx)(g.a.Text,{className:"text-warning fs-1 fw-bold",children:"Add Expense Details"}),Object(w.jsxs)(g.a.Group,{className:"mb-3 ",controlId:"expenseAmount",children:[Object(w.jsx)(g.a.Label,{className:"fw-bold",children:"Expense Amount"}),Object(w.jsx)(g.a.Control,{type:"number",placeholder:"Enter Expense Amount",className:"border border-warning",ref:r})]}),Object(w.jsxs)(g.a.Group,{className:"mb-3",controlId:"ExpenseDescription",children:[Object(w.jsx)(g.a.Label,{className:"fw-bold",children:"Description"}),Object(w.jsx)(g.a.Control,{type:"text",placeholder:"Enter Description",className:"border border-warning",ref:l})]}),Object(w.jsx)(g.a.Label,{className:"fw-bold",children:"Category"}),Object(w.jsxs)(g.a.Select,{"aria-label":"Default select example",className:"mb-3 border border-warning",ref:d,children:[Object(w.jsx)("option",{children:"Select Category--"}),Object(w.jsx)("option",{value:"food",children:"Food"}),Object(w.jsx)("option",{value:"shoping",children:"Shoping"}),Object(w.jsx)("option",{value:"traveling",children:"Traveling"}),Object(w.jsx)("option",{value:"other",children:"Other"})]}),Object(w.jsx)(f.a,{variant:"warning",type:"submit",className:"text-light fw-bold",children:"Add Expense"})]})})}),Object(w.jsxs)(k.a,{children:[!n&&Object(w.jsx)(f.a,{variant:"primary",onClick:async e=>{const t=await(e=>new Promise((t=>{const s=document.createElement("script");s.src=e,s.onload=()=>{t(!0)},s.onerror=()=>{t(!1)},document.body.appendChild(s)})))("https://checkout.razorpay.com/v1/checkout.js");if(!t)return void alert("Something went wrong");const s=await fetch("http://51.20.129.197:3000/expense/buy-premium",{method:"GET",headers:{Authorization:localStorage.getItem("token")}}),a=await s.json();console.log(a);var c={key_id:a.key_id,order_id:a.order.id,handler:async function(e){const t=await fetch("http://51.20.129.197:3000/expense/update-transaction",{method:"POST",body:JSON.stringify({order_id:e.razorpay_order_id,payment_id:e.razorpay_payment_id}),headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}}),s=await t.json();console.log(s),s.token?(j(o.setPremium({token:s.token})),alert("You Are A Premium User Now")):alert(s.message)}};const n=new window.Razorpay(c);console.log(n),n.open(),e.preventDefault()},children:"Buy Premium"}),n&&Object(w.jsxs)("div",{children:[Object(w.jsx)("h4",{children:"You Are A Premium User"}),Object(w.jsx)(f.a,{className:"mb-3",onClick:e?()=>{t(!1)}:async()=>{const e=await fetch("http://51.20.129.197:3000/expense/get-allexpenses",{method:"GET"}),s=await e.json();console.log(s.expenses),j(b.addExpense(s.expenses)),t(!0)},children:e?"Hide LeaderBoard":"Show LeaderBoard"})]}),n&&Object(w.jsx)("a",{href:"/report",className:" border border-black text-decoration-none bg-success text-light ",children:"Generate Report"})]}),Object(w.jsx)(k.a,{children:Object(w.jsx)(f.a,{onClick:()=>{j(o.logout())},children:"Logout"})})]}),Object(w.jsx)(P,{}),e&&Object(w.jsx)(I,{})]})},L=s(49),T=s.n(L);var G=e=>{const t=e.expense.reduce(((e,t)=>(console.log(e+" "+t),e+t.expenseAmount)),0);return Object(w.jsxs)(O.a,{children:[Object(w.jsx)("h3",{children:e.month}),Object(w.jsxs)(A.a,{striped:!0,bordered:!0,hover:!0,variant:"",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{className:"bg-info",children:"Date"}),Object(w.jsx)("th",{className:"bg-info",children:"Description"}),Object(w.jsx)("th",{className:"bg-info",children:"Category  "}),Object(w.jsx)("th",{className:"bg-info ",children:"Income Amount"}),Object(w.jsx)("th",{className:"bg-info ",children:"Expense Amount"})]})}),Object(w.jsxs)("tbody",{children:[e.expense.map((e=>Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:T()(e.createdAt).utc().format("DD-MM-YYYY")}),Object(w.jsx)("td",{children:e.description}),Object(w.jsx)("td",{children:e.category}),Object(w.jsx)("td",{children:"0"}),Object(w.jsx)("td",{children:e.expenseAmount})]},e.id))),Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{}),Object(w.jsx)("td",{}),Object(w.jsx)("td",{}),Object(w.jsx)("td",{className:"fw-bold",children:"Total Expenses"}),Object(w.jsx)("td",{className:"fw-bold",children:t})]})]})]})]})},J=s(123);const R=e=>{let t=T()(e).utc().format("MM");return t<10&&(t=t.substring(1)),z(t-1)},z=e=>["January","February","March","April","May","June","July","August","September","October","November","December"][e];var F=()=>{const e=Object(y.c)((e=>e.expense.expenses)),[t,s]=Object(a.useState)(""),c=Object(a.useRef)();console.log(e);const n=[e.filter((e=>"January"===R(e.createdAt))),e.filter((e=>"February"===R(e.createdAt))),e.filter((e=>"March"===R(e.createdAt))),e.filter((e=>"April"===R(e.createdAt))),e.filter((e=>"May"===R(e.createdAt))),e.filter((e=>"June"===R(e.createdAt))),e.filter((e=>"July"===R(e.createdAt))),e.filter((e=>"August"===R(e.createdAt))),e.filter((e=>"September"===R(e.createdAt))),e.filter((e=>"October"===R(e.createdAt))),e.filter((e=>"November"===R(e.createdAt))),e.filter((e=>"December"===R(e.createdAt)))];console.log(n);return Object(w.jsxs)(O.a,{children:[Object(w.jsx)("h1",{children:"Day To Day Expenses"}),n.map(((e,t)=>Object(w.jsx)(w.Fragment,{children:e.length>0&&Object(w.jsx)(G,{expense:e,month:z(t)})}))),Object(w.jsx)(f.a,{onClick:async()=>{const e=await fetch("http://51.20.129.197:3000/expense/download-expense",{method:"GET",headers:{Authorization:localStorage.getItem("token")}}),t=await e.json();t.url&&(console.log(t.url),s(t.url)),c.current.link.click()},children:"Download CSV"}),Object(w.jsx)(J.CSVLink,{data:t,filename:"transactions.csv",className:"hidden",ref:c,target:"_blank"})]})};var _=function(){const e=Object(y.b)();Object(a.useEffect)((()=>{localStorage.getItem("email")&&e(o.stayLogin())}),[]),Object(a.useEffect)((()=>{!async function(){const t=await fetch("http://51.20.129.197:3000/user/get-premium",{method:"GET",headers:{Authorization:localStorage.getItem("token")}}),s=await t.json();s.user&&s.user.isPremium&&e(o.setPremium({token:localStorage.getItem("token")}))}()}),[]),Object(a.useEffect)((()=>{!async function(){const t=await fetch("http://51.20.129.197:3000/expense/get-expense",{method:"GET",headers:{Authorization:localStorage.getItem("token")}}),s=await t.json();console.log(s),e(i.addExpenses({expenses:s.expenseData,totalPages:s.totalPages}))}()}),[]);const t=Object(y.c)((e=>e.auth.isLogin));return console.log(t),Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)("header",{className:"App-header"}),Object(w.jsx)("main",{className:"app-main",children:Object(w.jsxs)(h.d,{children:[Object(w.jsx)(h.b,{path:t?"/":"/add-expense",element:t?Object(w.jsx)(h.a,{to:"/add-expense"}):Object(w.jsx)(h.a,{to:"/"})}),Object(w.jsx)(h.b,{path:"/",element:Object(w.jsx)(v,{})}),Object(w.jsx)(h.b,{path:"/add-expense",element:Object(w.jsx)(D,{})}),Object(w.jsx)(h.b,{path:"/report",element:Object(w.jsx)(F,{})})]})})]})},B=s(45);s(262);u.a.createRoot(document.getElementById("root")).render(Object(w.jsx)(y.a,{store:p,children:Object(w.jsx)(B.a,{children:Object(w.jsx)(_,{})})}))}},[[264,1,2]]]);
//# sourceMappingURL=main.bc455e77.chunk.js.map